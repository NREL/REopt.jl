<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Methods · REopt.jl Documentation</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">REopt.jl Documentation</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">REopt</span><ul><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../inputs/">REopt Inputs</a></li><li><a class="tocitem" href="../outputs/">Outputs</a></li><li class="is-active"><a class="tocitem" href>Methods</a><ul class="internal"><li><a class="tocitem" href="#run_reopt"><span>run_reopt</span></a></li><li><a class="tocitem" href="#build_reopt!"><span>build_reopt!</span></a></li><li><a class="tocitem" href="#simulate_outages"><span>simulate_outages</span></a></li></ul></li></ul></li><li><span class="tocitem">Model Predictive Control</span><ul><li><a class="tocitem" href="../../mpc/examples/">MPC Examples</a></li><li><a class="tocitem" href="../../mpc/inputs/">MPC Inputs</a></li><li><a class="tocitem" href="../../mpc/outputs/">MPC Outputs</a></li><li><a class="tocitem" href="../../mpc/methods/">Methods</a></li></ul></li><li><span class="tocitem">Developer</span><ul><li><a class="tocitem" href="../../developer/concept/">Design Concepts for the REopt Module</a></li><li><a class="tocitem" href="../../developer/organization/">File Organization</a></li><li><a class="tocitem" href="../../developer/inputs/">The REoptInputs structure</a></li><li><a class="tocitem" href="../../developer/adding_tech/">Adding a Technology</a></li><li><a class="tocitem" href="../../developer/documentation/">Documenting the Code</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">REopt</a></li><li class="is-active"><a href>Methods</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Methods</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NREL/REopt.jl/blob/master/docs/src/reopt/methods.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Methods"><a class="docs-heading-anchor" href="#Methods">Methods</a><a id="Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Methods" title="Permalink"></a></h1><p>The primary method for using REopt is the <code>run_reopt</code> method. In the simplest there are two required inputs to <code>run_reopt</code>: a <code>JuMP.Model</code> with an optimizer and the path to a JSON file to define the <code>Scenario</code>. Other methods for <code>run_reopt</code> are enumerated below. Other methods such as <code>build_reopt!</code> are also described to allow users to build custom REopt models. For example, after using <code>build_reopt!</code> a user could add constraints or change the objective function using <code>JuMP</code> commands.</p><h2 id="run_reopt"><a class="docs-heading-anchor" href="#run_reopt">run_reopt</a><a id="run_reopt-1"></a><a class="docs-heading-anchor-permalink" href="#run_reopt" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.run_reopt" href="#REopt.run_reopt"><code>REopt.run_reopt</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">run_reopt(m::JuMP.AbstractModel, fp::String)</code></pre><p>Solve the model using the <code>Scenario</code> defined in JSON file stored at the file path <code>fp</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/72bbd77aeb9490c4db87233249b91a7b3d26aa40/src/core/reopt.jl#L51-L55">source</a></section><section><div><pre><code class="language-none">run_reopt(m::JuMP.AbstractModel, d::Dict)</code></pre><p>Solve the model using the <code>Scenario</code> defined in dict <code>d</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/72bbd77aeb9490c4db87233249b91a7b3d26aa40/src/core/reopt.jl#L71-L75">source</a></section><section><div><pre><code class="language-none">run_reopt(m::JuMP.AbstractModel, s::AbstractScenario)</code></pre><p>Solve the model using a <code>Scenario</code> or <code>BAUScenario</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/72bbd77aeb9490c4db87233249b91a7b3d26aa40/src/core/reopt.jl#L91-L95">source</a></section><section><div><pre><code class="language-none">run_reopt(t::Tuple{JuMP.AbstractModel, AbstractScenario})</code></pre><p>Method for use with Threads when running BAU in parallel with optimal scenario.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/72bbd77aeb9490c4db87233249b91a7b3d26aa40/src/core/reopt.jl#L113-L117">source</a></section><section><div><pre><code class="language-none">run_reopt(ms::AbstractArray{T, 1}, fp::String) where T &lt;: JuMP.AbstractModel</code></pre><p>Solve the <code>Scenario</code> and <code>BAUScenario</code> in parallel using the first two (empty) models in <code>ms</code> and inputs defined in the JSON file at the filepath <code>fp</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/72bbd77aeb9490c4db87233249b91a7b3d26aa40/src/core/reopt.jl#L124-L129">source</a></section><section><div><pre><code class="language-none">run_reopt(ms::AbstractArray{T, 1}, d::Dict) where T &lt;: JuMP.AbstractModel</code></pre><p>Solve the <code>Scenario</code> and <code>BAUScenario</code> in parallel using the first two (empty) models in <code>ms</code> and inputs from <code>d</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/72bbd77aeb9490c4db87233249b91a7b3d26aa40/src/core/reopt.jl#L136-L140">source</a></section><section><div><pre><code class="language-none">run_reopt(ms::AbstractArray{T, 1}, p::REoptInputs) where T &lt;: JuMP.AbstractModel</code></pre><p>Solve the <code>Scenario</code> and <code>BAUScenario</code> in parallel using the first two (empty) models in <code>ms</code> and inputs from <code>p</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/72bbd77aeb9490c4db87233249b91a7b3d26aa40/src/core/reopt.jl#L161-L165">source</a></section></article><h2 id="build_reopt!"><a class="docs-heading-anchor" href="#build_reopt!">build_reopt!</a><a id="build_reopt!-1"></a><a class="docs-heading-anchor-permalink" href="#build_reopt!" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.build_reopt!" href="#REopt.build_reopt!"><code>REopt.build_reopt!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">build_reopt!(m::JuMP.AbstractModel, fp::String)</code></pre><p>Add variables and constraints for REopt model.  <code>fp</code> is used to load in JSON file to construct REoptInputs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/72bbd77aeb9490c4db87233249b91a7b3d26aa40/src/core/reopt.jl#L196-L201">source</a></section><section><div><pre><code class="language-none">build_reopt!(m::JuMP.AbstractModel, p::REoptInputs)</code></pre><p>Add variables and constraints for REopt model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/72bbd77aeb9490c4db87233249b91a7b3d26aa40/src/core/reopt.jl#L209-L212">source</a></section></article><h2 id="simulate_outages"><a class="docs-heading-anchor" href="#simulate_outages">simulate_outages</a><a id="simulate_outages-1"></a><a class="docs-heading-anchor-permalink" href="#simulate_outages" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.simulate_outages" href="#REopt.simulate_outages"><code>REopt.simulate_outages</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">simulate_outages(;batt_kwh=0, batt_kw=0, pv_kw_ac_hourly=[], init_soc=[], critical_loads_kw=[], 
    wind_kw_ac_hourly=[], batt_roundtrip_efficiency=0.829, diesel_kw=0, fuel_available=0, b=0, m=0, 
    diesel_min_turndown=0.3
)</code></pre><p>Time series simulation of outages starting at every time step of the year. Used to calculate how many time steps the  critical load can be met in every outage, which in turn is used to determine probabilities of meeting the critical load.</p><p><strong>Arguments</strong></p><ul><li><code>batt_kwh</code>: float, battery storage capacity</li><li><code>batt_kw</code>: float, battery inverter capacity</li><li><code>pv_kw_ac_hourly</code>: list of floats, AC production of PV system</li><li><code>init_soc</code>: list of floats between 0 and 1 inclusive, initial state-of-charge</li><li><code>critical_loads_kw</code>: list of floats</li><li><code>wind_kw_ac_hourly</code>: list of floats, AC production of wind turbine</li><li><code>batt_roundtrip_efficiency</code>: roundtrip battery efficiency</li><li><code>diesel_kw</code>: float, diesel generator capacity</li><li><code>fuel_available</code>: float, gallons of diesel fuel available</li><li><code>b</code>: float, diesel fuel burn rate intercept coefficient (y = m<em>x + b</em>rated_capacity)  [gal/kwh/kw]</li><li><code>m</code>: float, diesel fuel burn rate slope (y = m<em>x + b</em>rated_capacity)  [gal/kWh]</li><li><code>diesel_min_turndown</code>: minimum generator turndown in fraction of generator capacity (0 to 1)</li></ul><p>Returns a dict</p><pre><code class="language-none">    &quot;resilience_by_time_step&quot;: vector of time steps that critical load is met for outage starting in every time step,
    &quot;resilience_hours_min&quot;: minimum of &quot;resilience_by_time_step&quot;,
    &quot;resilience_hours_max&quot;: maximum of &quot;resilience_by_time_step&quot;,
    &quot;resilience_hours_avg&quot;: average of &quot;resilience_by_time_step&quot;,
    &quot;outage_durations&quot;: vector of integers for outage durations with non zero probability of survival,
    &quot;probs_of_surviving&quot;: vector of probabilities corresponding to the &quot;outage_durations&quot;,
    &quot;probs_of_surviving_by_month&quot;: vector of probabilities calculated on a monthly basis,
    &quot;probs_of_surviving_by_hour_of_the_day&quot;:vector of probabilities calculated on a hour-of-the-day basis,
}</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/72bbd77aeb9490c4db87233249b91a7b3d26aa40/src/outagesim/outage_simulator.jl#L113-L148">source</a></section><section><div><pre><code class="language-none">simulate_outages(d::Dict, p::REoptInputs; microgrid_only::Bool=false)</code></pre><p>Time series simulation of outages starting at every time step of the year. Used to calculate how many time steps the  critical load can be met in every outage, which in turn is used to determine probabilities of meeting the critical load.</p><p><strong>Arguments</strong></p><ul><li><code>d</code>::Dict from <code>reopt_results</code></li><li><code>p</code>::REoptInputs the inputs that generated the Dict from <code>reopt_results</code></li><li><code>microgrid_only</code>::Bool whether or not to simulate only the optimal microgrid capacities or the total capacities. This input is only relevant when modeling multiple outages.</li></ul><p>Returns a dict</p><pre><code class="language-julia">{
    &quot;resilience_by_time_step&quot;: vector of time steps that critical load is met for outage starting in every time step,
    &quot;resilience_hours_min&quot;: minimum of &quot;resilience_by_time_step&quot;,
    &quot;resilience_hours_max&quot;: maximum of &quot;resilience_by_time_step&quot;,
    &quot;resilience_hours_avg&quot;: average of &quot;resilience_by_time_step&quot;,
    &quot;outage_durations&quot;: vector of integers for outage durations with non zero probability of survival,
    &quot;probs_of_surviving&quot;: vector of probabilities corresponding to the &quot;outage_durations&quot;,
    &quot;probs_of_surviving_by_month&quot;: vector of probabilities calculated on a monthly basis,
    &quot;probs_of_surviving_by_hour_of_the_day&quot;:vector of probabilities calculated on a hour-of-the-day basis,
}</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/72bbd77aeb9490c4db87233249b91a7b3d26aa40/src/outagesim/outage_simulator.jl#L229-L253">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../outputs/">« Outputs</a><a class="docs-footer-nextpage" href="../../mpc/examples/">MPC Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 3 February 2023 06:37">Friday 3 February 2023</span>. Using Julia version 1.7.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
