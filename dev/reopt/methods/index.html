<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Methods · REopt.jl Documentation</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">REopt.jl Documentation</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">REopt</span><ul><li><a class="tocitem" href="../examples/">Examples</a></li><li><a class="tocitem" href="../inputs/">REopt Inputs</a></li><li><a class="tocitem" href="../outputs/">Outputs</a></li><li class="is-active"><a class="tocitem" href>Methods</a><ul class="internal"><li><a class="tocitem" href="#run_reopt"><span>run_reopt</span></a></li><li><a class="tocitem" href="#build_reopt!"><span>build_reopt!</span></a></li><li><a class="tocitem" href="#simulate_outages"><span>simulate_outages</span></a></li><li><a class="tocitem" href="#backup_reliability"><span>backup_reliability</span></a></li></ul></li></ul></li><li><span class="tocitem">Model Predictive Control</span><ul><li><a class="tocitem" href="../../mpc/examples/">MPC Examples</a></li><li><a class="tocitem" href="../../mpc/inputs/">MPC Inputs</a></li><li><a class="tocitem" href="../../mpc/outputs/">MPC Outputs</a></li><li><a class="tocitem" href="../../mpc/methods/">Methods</a></li></ul></li><li><span class="tocitem">Developer</span><ul><li><a class="tocitem" href="../../developer/concept/">Design Concepts for the REopt Module</a></li><li><a class="tocitem" href="../../developer/organization/">File Organization</a></li><li><a class="tocitem" href="../../developer/inputs/">The REoptInputs structure</a></li><li><a class="tocitem" href="../../developer/adding_tech/">Adding a Technology</a></li><li><a class="tocitem" href="../../developer/documentation/">Documenting the Code</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">REopt</a></li><li class="is-active"><a href>Methods</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Methods</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/NREL/REopt.jl/blob/master/docs/src/reopt/methods.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Methods"><a class="docs-heading-anchor" href="#Methods">Methods</a><a id="Methods-1"></a><a class="docs-heading-anchor-permalink" href="#Methods" title="Permalink"></a></h1><p>The primary method for using REopt is the <code>run_reopt</code> method. In the simplest there are two required inputs to <code>run_reopt</code>: a <code>JuMP.Model</code> with an optimizer and the path to a JSON file to define the <code>Scenario</code>. Other methods for <code>run_reopt</code> are enumerated below. Other methods such as <code>build_reopt!</code> are also described to allow users to build custom REopt models. For example, after using <code>build_reopt!</code> a user could add constraints or change the objective function using <code>JuMP</code> commands.</p><h2 id="run_reopt"><a class="docs-heading-anchor" href="#run_reopt">run_reopt</a><a id="run_reopt-1"></a><a class="docs-heading-anchor-permalink" href="#run_reopt" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.run_reopt" href="#REopt.run_reopt"><code>REopt.run_reopt</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">run_reopt(m::JuMP.AbstractModel, fp::String)</code></pre><p>Solve the model using the <code>Scenario</code> defined in JSON file stored at the file path <code>fp</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/cfbd74ba2120dd46066a47f3f6e6970a5893e5ef/src/core/reopt.jl#L23-L27">source</a></section><section><div><pre><code class="language-none">run_reopt(m::JuMP.AbstractModel, d::Dict)</code></pre><p>Solve the model using the <code>Scenario</code> defined in dict <code>d</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/cfbd74ba2120dd46066a47f3f6e6970a5893e5ef/src/core/reopt.jl#L43-L47">source</a></section><section><div><pre><code class="language-none">run_reopt(m::JuMP.AbstractModel, s::AbstractScenario)</code></pre><p>Solve the model using a <code>Scenario</code> or <code>BAUScenario</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/cfbd74ba2120dd46066a47f3f6e6970a5893e5ef/src/core/reopt.jl#L63-L67">source</a></section><section><div><pre><code class="language-none">run_reopt(t::Tuple{JuMP.AbstractModel, AbstractScenario})</code></pre><p>Method for use with Threads when running BAU in parallel with optimal scenario.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/cfbd74ba2120dd46066a47f3f6e6970a5893e5ef/src/core/reopt.jl#L85-L89">source</a></section><section><div><pre><code class="language-none">run_reopt(ms::AbstractArray{T, 1}, fp::String) where T &lt;: JuMP.AbstractModel</code></pre><p>Solve the <code>Scenario</code> and <code>BAUScenario</code> in parallel using the first two (empty) models in <code>ms</code> and inputs defined in the JSON file at the filepath <code>fp</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/cfbd74ba2120dd46066a47f3f6e6970a5893e5ef/src/core/reopt.jl#L96-L101">source</a></section><section><div><pre><code class="language-none">run_reopt(ms::AbstractArray{T, 1}, d::Dict) where T &lt;: JuMP.AbstractModel</code></pre><p>Solve the <code>Scenario</code> and <code>BAUScenario</code> in parallel using the first two (empty) models in <code>ms</code> and inputs from <code>d</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/cfbd74ba2120dd46066a47f3f6e6970a5893e5ef/src/core/reopt.jl#L108-L112">source</a></section></article><h2 id="build_reopt!"><a class="docs-heading-anchor" href="#build_reopt!">build_reopt!</a><a id="build_reopt!-1"></a><a class="docs-heading-anchor-permalink" href="#build_reopt!" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.build_reopt!" href="#REopt.build_reopt!"><code>REopt.build_reopt!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">build_reopt!(m::JuMP.AbstractModel, fp::String)</code></pre><p>Add variables and constraints for REopt model.  <code>fp</code> is used to load in JSON file to construct REoptInputs.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/cfbd74ba2120dd46066a47f3f6e6970a5893e5ef/src/core/reopt.jl#L170-L175">source</a></section><section><div><pre><code class="language-none">build_reopt!(m::JuMP.AbstractModel, p::REoptInputs)</code></pre><p>Add variables and constraints for REopt model.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/cfbd74ba2120dd46066a47f3f6e6970a5893e5ef/src/core/reopt.jl#L183-L186">source</a></section></article><h2 id="simulate_outages"><a class="docs-heading-anchor" href="#simulate_outages">simulate_outages</a><a id="simulate_outages-1"></a><a class="docs-heading-anchor-permalink" href="#simulate_outages" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.simulate_outages" href="#REopt.simulate_outages"><code>REopt.simulate_outages</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">simulate_outages(;batt_kwh=0, batt_kw=0, pv_kw_ac_hourly=[], init_soc=[], critical_loads_kw=[], 
    wind_kw_ac_hourly=[], batt_roundtrip_efficiency=0.829, diesel_kw=0, fuel_available=0, b=0, m=0, 
    diesel_min_turndown=0.3
)</code></pre><p>Time series simulation of outages starting at every time step of the year. Used to calculate how many time steps the  critical load can be met in every outage, which in turn is used to determine probabilities of meeting the critical load.</p><p><strong>Arguments</strong></p><ul><li><code>batt_kwh</code>: float, battery storage capacity</li><li><code>batt_kw</code>: float, battery inverter capacity</li><li><code>pv_kw_ac_hourly</code>: list of floats, AC production of PV system</li><li><code>init_soc</code>: list of floats between 0 and 1 inclusive, initial state-of-charge</li><li><code>critical_loads_kw</code>: list of floats</li><li><code>wind_kw_ac_hourly</code>: list of floats, AC production of wind turbine</li><li><code>batt_roundtrip_efficiency</code>: roundtrip battery efficiency</li><li><code>diesel_kw</code>: float, diesel generator capacity</li><li><code>fuel_available</code>: float, gallons of diesel fuel available</li><li><code>b</code>: float, diesel fuel burn rate intercept coefficient (y = m<em>x + b</em>rated_capacity)  [gal/kwh/kw]</li><li><code>m</code>: float, diesel fuel burn rate slope (y = m<em>x + b</em>rated_capacity)  [gal/kWh]</li><li><code>diesel_min_turndown</code>: minimum generator turndown in fraction of generator capacity (0 to 1)</li></ul><p>Returns a dict</p><pre><code class="language-none">    &quot;resilience_by_time_step&quot;: vector of time steps that critical load is met for outage starting in every time step,
    &quot;resilience_hours_min&quot;: minimum of &quot;resilience_by_time_step&quot;,
    &quot;resilience_hours_max&quot;: maximum of &quot;resilience_by_time_step&quot;,
    &quot;resilience_hours_avg&quot;: average of &quot;resilience_by_time_step&quot;,
    &quot;outage_durations&quot;: vector of integers for outage durations with non zero probability of survival,
    &quot;probs_of_surviving&quot;: vector of probabilities corresponding to the &quot;outage_durations&quot;,
    &quot;probs_of_surviving_by_month&quot;: vector of probabilities calculated on a monthly basis,
    &quot;probs_of_surviving_by_hour_of_the_day&quot;:vector of probabilities calculated on a hour-of-the-day basis,
}</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/cfbd74ba2120dd46066a47f3f6e6970a5893e5ef/src/outagesim/outage_simulator.jl#L84-L119">source</a></section><section><div><pre><code class="language-none">simulate_outages(d::Dict, p::REoptInputs; microgrid_only::Bool=false)</code></pre><p>Time series simulation of outages starting at every time step of the year. Used to calculate how many time steps the  critical load can be met in every outage, which in turn is used to determine probabilities of meeting the critical load.</p><p><strong>Arguments</strong></p><ul><li><code>d</code>::Dict from <code>reopt_results</code></li><li><code>p</code>::REoptInputs the inputs that generated the Dict from <code>reopt_results</code></li><li><code>microgrid_only</code>::Bool whether or not to simulate only the optimal microgrid capacities or the total capacities. This input is only relevant when modeling multiple outages.</li></ul><p>Returns a dict</p><pre><code class="language-julia">{
    &quot;resilience_by_time_step&quot;: vector of time steps that critical load is met for outage starting in every time step,
    &quot;resilience_hours_min&quot;: minimum of &quot;resilience_by_time_step&quot;,
    &quot;resilience_hours_max&quot;: maximum of &quot;resilience_by_time_step&quot;,
    &quot;resilience_hours_avg&quot;: average of &quot;resilience_by_time_step&quot;,
    &quot;outage_durations&quot;: vector of integers for outage durations with non zero probability of survival,
    &quot;probs_of_surviving&quot;: vector of probabilities corresponding to the &quot;outage_durations&quot;,
    &quot;probs_of_surviving_by_month&quot;: vector of probabilities calculated on a monthly basis,
    &quot;probs_of_surviving_by_hour_of_the_day&quot;:vector of probabilities calculated on a hour-of-the-day basis,
}</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/cfbd74ba2120dd46066a47f3f6e6970a5893e5ef/src/outagesim/outage_simulator.jl#L200-L224">source</a></section></article><h2 id="backup_reliability"><a class="docs-heading-anchor" href="#backup_reliability">backup_reliability</a><a id="backup_reliability-1"></a><a class="docs-heading-anchor-permalink" href="#backup_reliability" title="Permalink"></a></h2><article class="docstring"><header><a class="docstring-binding" id="REopt.backup_reliability" href="#REopt.backup_reliability"><code>REopt.backup_reliability</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">backup_reliability(d::Dict, p::REoptInputs, r::Dict)</code></pre><p>Return dictionary of backup reliability results.</p><p><strong>Arguments</strong></p><ul><li><code>d::Dict</code>: REopt results dictionary. Subhourly time steps are not yet supported.</li><li><code>p::REoptInputs</code>: REopt Inputs Struct.</li><li><code>r::Dict</code>: Dictionary of inputs for reliability calculations. If r not included then uses all defaults. </li></ul><p>Possible keys in r:     -generator<em>operational</em>availability::Real = 0.995       Fraction of year generators not down for maintenance     -generator<em>failure</em>to<em>start::Real = 0.0094              Chance of generator starting given outage     -generator</em>mean<em>time</em>to<em>failure::Real = 1100            Average number of time steps between a generator&#39;s failures. 1/(failure to run probability).      -num</em>generators::Int = 1                                Number of generators.     -generator<em>size</em>kw::Real = 0.0                          Backup generator capacity.      -num<em>battery</em>bins::Int = depends on battery sizing      Number of bins for discretely modeling battery state of charge     -battery<em>operational</em>availability::Real = 0.97          Likelihood battery will be available at start of outage            -pv<em>operational</em>availability::Real = 0.98               Likelihood PV will be available at start of outage     -wind<em>operational</em>availability::Real = 0.97             Likelihood Wind will be available at start of outage     -max<em>outage</em>duration::Int = 96                          Maximum outage duration modeled     -microgrid_only::Bool = false                           Determines how generator, PV, and battery act during islanded mode</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/cfbd74ba2120dd46066a47f3f6e6970a5893e5ef/src/outagesim/backup_reliability.jl#L1346-L1368">source</a></section><section><div><pre><code class="language-none">backup_reliability(r::Dict)</code></pre><p>Return dictionary of backup reliability results.</p><p><strong>Arguments</strong></p><ul><li><code>r::Dict</code>: Dictionary of inputs for reliability calculations. If r not included then uses all defaults. </li></ul><p>Possible keys in r: -critical<em>loads</em>kw::Array                               Critical loads per time step. Must be hourly and have length of 8760. (Required input) -microgrid<em>only::Bool                                   Boolean to check if only microgrid runs during grid outage (defaults to false) -chp</em>size<em>kw::Real                                      CHP capacity.  -pv</em>size<em>kw::Real                                       Size of PV System -pv</em>production<em>factor</em>series::Array                     PV production factor per time step. Must be hourly and have length of 8760. (Required if pv<em>size</em>kw in dictionary) -pv<em>migrogrid</em>upgraded::Bool                            If true then PV runs during outage if microgrid<em>only = TRUE (defaults to false) -battery</em>size<em>kw::Real                                  Battery capacity. If no battery installed then PV disconnects from system during outage -battery</em>size<em>kwh::Real                                 Battery energy storage capacity -battery</em>charge<em>efficiency::Real                        Battery charge efficiency -battery</em>discharge<em>efficiency::Real                     Battery discharge efficiency -battery</em>starting<em>soc</em>series<em>fraction::Array            Battery percent state of charge time series during normal grid-connected usage. Must be hourly and have length of 8760. -generator</em>failure<em>to</em>start::Real = 0.0094              Chance of generator starting given outage -generator<em>mean</em>time<em>to</em>failure::Real = 1100            Average number of time steps between a generator&#39;s failures. 1/(failure to run probability).  -num<em>generators::Int = 1                                Number of generators.  -generator</em>size<em>kw::Real = 0.0                          Backup generator capacity.  -num</em>battery<em>bins::Int = num</em>battery<em>bins</em>default(r[:battery<em>size</em>kw],r[:battery<em>size</em>kwh])     Number of bins for discretely modeling battery state of charge -max<em>outage</em>duration::Int = 96                          Maximum outage duration modeled</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/NREL/REopt.jl/blob/cfbd74ba2120dd46066a47f3f6e6970a5893e5ef/src/outagesim/backup_reliability.jl#L1376-L1402">source</a></section></article></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../outputs/">« Outputs</a><a class="docs-footer-nextpage" href="../../mpc/examples/">MPC Examples »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 12 September 2025 20:11">Friday 12 September 2025</span>. Using Julia version 1.10.10.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
